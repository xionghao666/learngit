<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>微博-点滴生活，精彩世界</title>
<style type="text/css">
            .big{
                width:400px;
                height:400px;
                position:absolute;
                display:none;
                overflow:hidden;
            }
            /*侧边导航*/
            .content{width:260px;margin:100px auto;}
            .filterinput{
             background-color:rgba(249, 244, 244, 0);
            border-radius:15px;
            width:90%;
            height:30px;
            border:thin solid #FFF;
            text-indent:0.5em;
            font-weight:bold;
            color:#FFF;
            }
            #demo-list a{
            overflow:hidden;
            text-overflow:ellipsis;
            -o-text-overflow:ellipsis;
            white-space:nowrap;
            width:100%;
            }
            /*侧边导航*/
        </style>
</head>
<link href="__PUBLIC__/Autotop/css/woituku.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="__PUBLIC__/Autotop/js/jquery.min.js"></script>
<script language="javascript" src="__PUBLIC__/jquery-1.7.2.min.js"></script>
<link href="__PUBLIC__/styles/global.css" type="text/css" rel="stylesheet">
<link href="__PUBLIC__/styles/friend maneger.css" type="text/css" rel="stylesheet">
  <!-- 侧边导航   -->
<link href="__PUBLIC__/daohang/css/jquery-accordion-menu.css" rel="stylesheet" type="text/css" />
<link href="__PUBLIC__/daohang/css/font-awesome.css" rel="stylesheet" type="text/css" />
<script src="__PUBLIC__/daohang/js/jquery-1.11.2.min.js" type="text/javascript"></script>
<script src="__PUBLIC__/daohang/js/jquery-accordion-menu.js" type="text/javascript"></script>
<script type="text/javascript">
jQuery(document).ready(function () {
    jQuery("#jquery-accordion-menu").jqueryAccordionMenu();
    
});

$(function(){   
    //顶部导航切换
    $("#demo-list li").click(function(){
        $("#demo-list li.active").removeClass("active")
        $(this).addClass("active");
    })  
})  
</script>
  <!-- 侧边导航 结束  -->
<body style="filter:alpha(opacity=100)" id="totop">
<div class="actGotop"><a href="javascript:;" title="Top"></a></div>
<!-- 火箭回到顶部 -->
<script type="text/javascript">
$(function(){   
    $(window).scroll(function() {       
        if($(window).scrollTop() >= 100){ //向下滚动像素大于这个值时，即出现小火箭~
            $('.actGotop').fadeIn(300); //火箭淡入的时间，越小出现的越快~
        }else{    
            $('.actGotop').fadeOut(300); //火箭淡出的时间，越小消失的越快~
        }  
    });
    $('.actGotop').click(function(){$('html,body').animate({scrollTop: '0px'}, 800);}); //火箭动画停留时间，越小消失的越快~
});
</script>
<!-- 火箭特效结束 -->
<!-- 总容器 container开 始-->
<div>
<div id="container">
	    <!-- topDIV 开始 -->
  <div id="top">
    <!-- top部分的LogoDIV -->
    	<div id="topLogo">
        	<!-- topLogo部分的icoDIV -->
            <div id="topLogoIco"> <img src="__PUBLIC__/images/logo.png" width="90" height="72" alt="" />
          </div>
            <!-- topLogo部分的icoDIV结束 -->
            
            <!-- topLogo部分的wordDIV -->
            <div id="topLogoWord" style="position: absolute;left: 90px;top: 2px;"><img src="__PUBLIC__/images/weico.png" width="180" height="70" alt="" />
          </div>
            <!-- topLogo部分的wordDIV -->
        </div>
        <!-- top部分的LogoDIV结束 -->
        
        <!-- top部分的文字导航 -->
        <div id="topWordMenu">
        	<ul>
                <li><a href="{:U('Index/index')}">首页</a></li>
                <li><a href="{:U('Random/index')}">逛一逛</a></li>
                <li><a href="{:U('Person/index')}">我的微博</a></li>
                <li><a href="{:U('Safety/index')}">安全中心</a></li>
                <li><a href="{:U('Person/edit')}">设置</a></li>
                <li><a href="{:U('Login/logout')}">退出</a></li>
            </ul>
        </div>
        <!-- top部分的文字导航结束 -->
    </div>
    <div id="newmsg" style="position: absolute;right: 123px;top: 80px; background-color: #8BCBDB;width: 170px;text-align: center;display: none;color: red" ><br/>
    <b >☞ 新 消 息 提 示 ☜</b><br/><br/>
    <div id="new">
        <!-- <a id="newc" ></a><br/><br/>
        <a id="newa" ></a><br/><br/>
        <a id="news" ></a><br/><br/> -->
    </div>  
    
</div>
<!-- 左边侧列表导航栏 -->
<div style="position: fixed;left: 20px;top: -17px;width:100px;height: 300px">

<div class="content">

    <div id="jquery-accordion-menu" class="jquery-accordion-menu red">
        <ul id="demo-list">
         
           <li style="text-align: center"><a href="{:U('Topic/index',array('topic'=>'明星'))}">明星({$_SESSION['home']['counttopic']}) </a></li>
            <li style="text-align: center"><a href="{:U('Topic/index',array('topic'=>'娱乐'))}">八卦娱乐({$_SESSION['home']['counttopic1']}) </a></li>
            <li style="text-align: center"><a href="{:U('Topic/index',array('topic'=>'维多利亚'))}">维密秀({$_SESSION['home']['counttopic11']}) </a></li>
            
            <li style="text-align: center"><a href="{:U('Topic/index',array('topic'=>'汽车'))}">汽车({$_SESSION['home']['counttopic2']}) </a></li>
            <li style="text-align: center"><a href="{:U('Topic/index',array('topic'=>'医学'))}">医学({$_SESSION['home']['counttopic3']}) </a></li>
            <li style="text-align: center"><a href="{:U('Topic/index',array('topic'=>'搞笑'))}">搞笑({$_SESSION['home']['counttopic4']}) </a></li>
            <li style="text-align: center"><a href="{:U('Topic/index',array('topic'=>'时尚穿搭'))}">时尚穿搭({$_SESSION['home']['counttopic7']}) </a></li>
            
            <li style="text-align: center"><a href="{:U('Topic/index',array('topic'=>'川普'))}">川普({$_SESSION['home']['counttopic6']}) </a></li>
            <li style="text-align: center"><a href="{:U('Topic/index',array('topic'=>'职场'))}">职场({$_SESSION['home']['counttopic8']}) </a></li>
            <li style="text-align: center"><a href="{:U('Topic/index',array('topic'=>'电影'))}">电影({$_SESSION['home']['counttopic9']}) </a></li>
        </ul>
        
    </div>
</div>
<script type="text/javascript">
(function($) {
$.expr[":"].Contains = function(a, i, m) {
    return (a.textContent || a.innerText || "").toUpperCase().indexOf(m[3].toUpperCase()) >= 0;
};
function filterList(header, list) {
    //@header 头部元素
    //@list 无需列表
    //创建一个搜素表单
    var form = $("<form>").attr({
        "class":"filterform",
        action:"#"
    }), input = $("<input>").attr({
        "class":"filterinput",
        type:"text"
    });
    $(form).append(input).appendTo(header);
    $(input).change(function() {
        var filter = $(this).val();
        if (filter) {
            $matches = $(list).find("a:Contains(" + filter + ")").parent();
            $("li", list).not($matches).slideUp();
            $matches.slideDown();
        } else {
            $(list).find("li").slideDown();
        }
        return false;
    }).keyup(function() {
        $(this).change();
    });
}
$(function() {
    filterList($("#form"), $("#demo-list"));
});
})(jQuery); 
</script>
</div>
<!-- 左边侧列表导航栏结束 -->

<script type="text/javascript">

    //前端Ajax持续调用服务端，称为Ajax轮询技术

    var getting = {
        url:"{:U('Index/newmsg')}",

        dataType:'json',

        success:function(res) {

        console.log(res);
        var newmsg = document.getElementById('newmsg');

        if (res['comment'] != 0 || res['at'] !=0 || res['chat'] !=0){
            newmsg.style.display = "block";
            var str = "";
            //存在新评论
            if (res['comment'] != 0) {
                str += "<a href='{:U('Show/index')}' >你有" + res['comment'] +"条新评论</a><br/><br/>";
            }
            //存在新AT
            if (res['at'] != 0) {
                str += "<a href='{:U('At/index')}' >你有" + res['at'] +"条新AT</a><br/><br/>";
            }
            //存在新私信
            if (res['chat'] != 0) {
                str += "<a href='{:U('Sx/index')}'>你有" + res['chat'] +"条新私信</a><br/><br/>";
            }  
            $('#new').html(str);
        }

    }
  };
  window.setTimeout(function(){$.ajax(getting)},500);
  window.setInterval(function(){$.ajax(getting)},3000);

</script>